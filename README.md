# instagram-highload
ДЗ-1 по курсу Highload. Проектирование веб-сервиса Instagram

### 1. Тема
Instagram - приложение для обмена фотографиями с элементами социальной сети

* функционал по публикации фото, их комментированию, просмотру ленты
* 70% аудитории моложе 30 лет
* наиболее популярен в США, России и Индии

### 2. Планируемая нагрузка

* аудитория - 1 млрд. человек ([источник](https://tass.ru/ekonomika/5309458))
* около 500 млн. пользователей ежедневно ([источник](https://lpgenerator.ru/blog/2019/02/28/instagram-v-cifrah-statistika-na-2019-god/))
* среднее время, проведенное в Instagram - 28 мин./день ([источник](https://www.likeni.ru/analytics/statistika-po-instagram-kotoruyu-nuzhno-znat-k-2020-godu/))

Обычно, пользователь заходит на сайт по несколько раз в день.
Зная, что среднее время, проведенное в Instagram - 28 мин./день, предположим,
что пользователь заходит 7 раз в день, проводя на сайте по 4 минуты.

Теперь оценим трафик среднестатистического пользователя за одну сессию.

За 4 минуты пользования сайтом(просмотр ленты), я сделал 315 запросов и загрузил 33.8 мб данных.
Их них:
* на динамику - 75 запросов и 995 кб (~ 0.97 мб)
* на картинки - 211 запросов и 28.5 мб
* на остальную статику - 29 запросов и 4.3 мб

Тогда за сутки среднестатистический пользователь:
* для динамики <br/>
  * загрузит ```7 * 0.97 = 6.8 мб``` данных <br/>
  * сделает ```7 * 75 = 525``` запросов

* для картинок <br/>
  * загрузит ```7 * 28.5 = 199.5 мб``` данных <br/>
  * сделает ```7 * 211 = 1477``` запросов

* для остальной статики <br/>
  * загрузит ```7 * 4.3 = 30.1 мб``` данных <br/>
  * сделает ```7 * 29 = 203``` запроса

Расcчитаем средний трафик:
- динамика:```(6.8 мб * 500 000 000) * (8/1024) / (24 * 60 * 60) = 307.44 Гбит/с```
- картинки: ```(199.5 мб * 500 000 000) * (8/1024) / (24 * 60 * 60) = 9019.64 Гбит/c```
- остальная статика:```(30.1 мб * 500 000 000) * (8/1024) / (24 * 60 * 60) = 1360.86 Гбит/c```

Расcчитаем средний RPS:
- динамика: ```(525 * 500 000 000) / (24 * 60 * 60) = 3 038 195 RPS```
- картинки: ```(1477 * 500 000 000) / (24 * 60 * 60) = 8 547 454 RPS```
- остальная статика: ```(203 * 500 000 000) / (24 * 60 * 60) = 1 174 769 RPS```




